{"resourceType":"Library","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://hl7.org/fhir/us/core/CodeSystem/condition-category","code":"health-concern","display":"Health Concern"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/condition-clinical","code":"active","display":"Active"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/condition-clinical","code":"recurrence","display":"Recurrence"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/condition-clinical","code":"relapse","display":"Relapse"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/v3-ActCode","code":"VR","display":"virtual"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/condition-category","code":"problem-list-item","display":"Problem List Item"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://loinc.org","code":"39156-5","display":"Body mass index (BMI) [Ratio]"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://snomed.info/sct","code":"428361000124107","display":"Discharge to home for hospice care (procedure)"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://snomed.info/sct","code":"428371000124100","display":"Discharge to healthcare facility for hospice care (procedure)"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://terminology.hl7.org/CodeSystem/observation-category","code":"survey","display":"survey"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://loinc.org","code":"45755-6","display":"Hospice care [Minimum Data Set]"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://snomed.info/sct","code":"373066001","display":"Yes (qualifier value)"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-directReferenceCode","valueCoding":{"system":"http://loinc.org","code":"71007-9","display":"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)"}},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"BMI during Measurement Period"},{"url":"statement","valueString":"define \"BMI during Measurement Period\":\n  [\"observation-bmi\"] BMI\n    where BMI.value > 0 'kg/m2'\n      and BMI.status in { 'final', 'amended', 'corrected' }\n      and BMI.effective.toInterval ( ) during day of \"Measurement Period\""},{"url":"displaySequence","valueInteger":0}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Documented Low BMI during Measurement Period"},{"url":"statement","valueString":"define \"Documented Low BMI during Measurement Period\":\n  \"BMI during Measurement Period\" BMI\n    where BMI.effective.toInterval ( ) during day of \"Measurement Period\"\n      and BMI.value < 18.5 'kg/m2'"},{"url":"displaySequence","valueInteger":1}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Low BMI Interventions Ordered"},{"url":"statement","valueString":"define \"Low BMI Interventions Ordered\":\n  ( ( [ServiceRequest: \"Follow Up for Below Normal BMI\"]\n      union [ServiceRequest: \"Referrals Where Weight Assessment May Occur\"]\n      union [MedicationRequest: \"Medications for Below Normal BMI\"] ) LowInterventionsOrdered\n      where LowInterventionsOrdered.reasonCode in \"Underweight\"\n        or ( exists [Condition: \"Underweight\"] Underweight\n            where ( Underweight.isHealthConcern ( ) )\n              and Underweight.isActive ( )\n              and Underweight.prevalenceInterval ( ) starts before or on day of LowInterventionsOrdered.authoredOn\n              and LowInterventionsOrdered.authoredOn during day of \"Measurement Period\"\n        )\n  )"},{"url":"displaySequence","valueInteger":2}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Low BMI Interventions Performed"},{"url":"statement","valueString":"define \"Low BMI Interventions Performed\":\n  ( [Procedure: \"Follow Up for Below Normal BMI\"] LowInterventionsPerformed\n      where LowInterventionsPerformed.reasonCode in \"Underweight\"\n        and LowInterventionsPerformed.status = 'completed'\n        or ( exists [Condition: \"Underweight\"] Underweight\n            where ( Underweight.isHealthConcern ( ) )\n              and Underweight.isActive ( )\n              and Underweight.prevalenceInterval ( ) starts before or on day of LowInterventionsPerformed.performed.toInterval ( )\n              and LowInterventionsPerformed.performed.toInterval ( ) during day of \"Measurement Period\"\n        )\n  )"},{"url":"displaySequence","valueInteger":3}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Low BMI and Follow up Provided"},{"url":"statement","valueString":"define \"Low BMI and Follow up Provided\":\n  ( \"Documented Low BMI during Measurement Period\" LowBMI\n      with ( \"Low BMI Interventions Ordered\"\n        union \"Low BMI Interventions Performed\" ) LowBMIInterventions\n        such that Coalesce(LowBMIInterventions.performed.toInterval(), LowBMIInterventions.authoredOn.toInterval()) starts during day of \"Measurement Period\"\n  )"},{"url":"displaySequence","valueInteger":4}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Documented High BMI during Measurement Period"},{"url":"statement","valueString":"define \"Documented High BMI during Measurement Period\":\n  \"BMI during Measurement Period\" BMI\n    where BMI.effective.toInterval ( ) during day of \"Measurement Period\"\n      and BMI.value >= 25 'kg/m2'"},{"url":"displaySequence","valueInteger":5}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Has Normal BMI"},{"url":"statement","valueString":"define \"Has Normal BMI\":\n  exists ( \"BMI during Measurement Period\" BMI\n      where BMI.value in Interval[18.5 'kg/m2', 24.9 'kg/m2']\n  )\n    and not ( exists \"Documented High BMI during Measurement Period\"\n        or exists \"Documented Low BMI during Measurement Period\"\n    )"},{"url":"displaySequence","valueInteger":6}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"High BMI Interventions Performed"},{"url":"statement","valueString":"define \"High BMI Interventions Performed\":\n  ( [Procedure: \"Follow Up for Above Normal BMI\"] HighInterventionsPerformed\n      where HighInterventionsPerformed.reasonCode in \"Overweight or Obese\"\n        and HighInterventionsPerformed.status = 'completed'\n        or ( exists [Condition: \"Overweight or Obese\"] OverweightObese\n            where OverweightObese.isHealthConcern ( )\n              and OverweightObese.isActive ( )\n              and OverweightObese.prevalenceInterval ( ) starts before or on day of HighInterventionsPerformed.performed.toInterval ( )\n        )\n  )"},{"url":"displaySequence","valueInteger":7}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Qualifying Encounter during Day of Measurement Period"},{"url":"statement","valueString":"define \"Qualifying Encounter during Day of Measurement Period\":\n  [Encounter: \"Encounter to Evaluate BMI\"] BMIEncounter\n    where BMIEncounter.period during day of \"Measurement Period\"\n      and BMIEncounter.class !~ \"virtual\"\n      and BMIEncounter.status = 'finished'"},{"url":"displaySequence","valueInteger":8}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Medical Reason for Not Documenting a Follow up Plan for Low or High BMI"},{"url":"statement","valueString":"define \"Medical Reason for Not Documenting a Follow up Plan for Low or High BMI\":\n  ( ( [ServiceNotRequested: \"Referrals Where Weight Assessment May Occur\"]\n      union [ServiceNotRequested: \"Follow Up for Above Normal BMI\"]\n      union [ServiceNotRequested: \"Follow Up for Below Normal BMI\"] ) NoBMIFollowUp\n      with \"Qualifying Encounter during Day of Measurement Period\" QualifyingEncounter\n        such that NoBMIFollowUp.authoredOn same day as start of QualifyingEncounter.period\n      where NoBMIFollowUp.status ~ 'completed'\n        and NoBMIFollowUp.reasonRefused in \"Medical Reason\"\n  )\n    union ( ( [MedicationNotRequested: \"Medications for Above Normal BMI\"]\n        union [MedicationNotRequested: \"Medications for Below Normal BMI\"] ) NoBMIFollowUp\n        with \"Qualifying Encounter during Day of Measurement Period\" QualifyingEncounter\n          such that NoBMIFollowUp.authoredOn same day as start of QualifyingEncounter.period\n        where NoBMIFollowUp.status ~ 'completed'\n          and NoBMIFollowUp.reasonCode in \"Medical Reason\"\n    )"},{"url":"displaySequence","valueInteger":9}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Race"},{"url":"statement","valueString":"define \"SDE Race\":\n  Patient.race R\n    return Tuple {\n       codes: R.ombCategory union R.detailed,\n       display: R.text\n    }"},{"url":"displaySequence","valueInteger":10}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"SDE Race"},{"url":"statement","valueString":"define \"SDE Race\":\n  SDE.\"SDE Race\""},{"url":"displaySequence","valueInteger":11}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Pregnancy"},{"url":"statement","valueString":"define \"Pregnancy\":\n  [Condition: \"Pregnancy or Other Related Diagnoses\"] PregnancyDiagnosis\n    with \"Qualifying Encounter during Day of Measurement Period\" QualifyingEncounter\n      such that PregnancyDiagnosis.clinicalStatus ~ QICoreCommon.\"active\"\n        and PregnancyDiagnosis.prevalenceInterval ( ) overlaps day of \"Measurement Period\""},{"url":"displaySequence","valueInteger":12}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Sex"},{"url":"statement","valueString":"define \"SDE Sex\":\n  case\n      when Patient.gender = 'male' then Code { code: 'M', system: 'http://hl7.org/fhir/v3/AdministrativeGender', display: 'Male' }\n      when Patient.gender = 'female' then Code { code: 'F', system: 'http://hl7.org/fhir/v3/AdministrativeGender', display: 'Female' }\n      else null\n    end"},{"url":"displaySequence","valueInteger":13}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"SDE Sex"},{"url":"statement","valueString":"define \"SDE Sex\":\n  SDE.\"SDE Sex\""},{"url":"displaySequence","valueInteger":14}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"High BMI Interventions Ordered"},{"url":"statement","valueString":"define \"High BMI Interventions Ordered\":\n  ( ( [ServiceRequest: \"Follow Up for Above Normal BMI\"]\n      union [ServiceRequest: \"Referrals Where Weight Assessment May Occur\"]\n      union [MedicationRequest: \"Medications for Above Normal BMI\"] ) HighInterventionsOrdered\n      where HighInterventionsOrdered.reasonCode in \"Overweight or Obese\"\n        or ( exists [Condition: \"Overweight or Obese\"] OverweightObese\n            where ( OverweightObese.isProblemListItem ( )\n                or OverweightObese.isHealthConcern ( )\n            )\n              and OverweightObese.isActive ( )\n              and OverweightObese.prevalenceInterval ( ) starts before or on day of HighInterventionsOrdered.authoredOn\n        )\n  )"},{"url":"displaySequence","valueInteger":15}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"High BMI and Follow up Provided"},{"url":"statement","valueString":"define \"High BMI and Follow up Provided\":\n  \"Documented High BMI during Measurement Period\" HighBMI\n    with ( \"High BMI Interventions Ordered\"\n      union \"High BMI Interventions Performed\" ) HighBMIInterventions\n      such that Coalesce(HighBMIInterventions.performed.toInterval(), HighBMIInterventions.authoredOn.toInterval()) starts during day of \"Measurement Period\""},{"url":"displaySequence","valueInteger":16}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Numerator"},{"url":"statement","valueString":"define \"Numerator\":\n  exists \"High BMI and Follow up Provided\"\n    or exists \"Low BMI and Follow up Provided\"\n    or \"Has Normal BMI\""},{"url":"displaySequence","valueInteger":17}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Medical Reason or Patient Reason for Not Performing BMI Exam"},{"url":"statement","valueString":"define \"Medical Reason or Patient Reason for Not Performing BMI Exam\":\n  [ObservationNotDone: code = \"Body mass index (BMI) [Ratio]\"] NoBMI\n    with \"Qualifying Encounter during Day of Measurement Period\" QualifyingEncounter\n      such that NoBMI.effective.toInterval ( ) ends same day as start of QualifyingEncounter.period\n    where NoBMI.status = 'cancelled'\n      and ( NoBMI.notDoneReason in \"Patient Declined\"\n          or NoBMI.notDoneReason in \"Medical Reason\"\n      )"},{"url":"displaySequence","valueInteger":18}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Initial Population"},{"url":"statement","valueString":"define \"Initial Population\":\n  exists \"Qualifying Encounter during Day of Measurement Period\" QualifyingEncounter\n    where \"AgeInYearsAt\"(date from start of QualifyingEncounter.period) >= 18"},{"url":"displaySequence","valueInteger":19}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Denominator"},{"url":"statement","valueString":"define \"Denominator\":\n  \"Initial Population\""},{"url":"displaySequence","valueInteger":20}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Payer"},{"url":"statement","valueString":"define \"SDE Payer\":\n  [Coverage: type in \"Payer Type\"] Payer\n    return {\n      code: Payer.type,\n      period: Payer.period\n    }"},{"url":"displaySequence","valueInteger":21}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"SDE Payer"},{"url":"statement","valueString":"define \"SDE Payer\":\n  SDE.\"SDE Payer\""},{"url":"displaySequence","valueInteger":22}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"SupplementalDataElements"},{"url":"name","valueString":"SDE Ethnicity"},{"url":"statement","valueString":"define \"SDE Ethnicity\":\n  Patient.ethnicity E\n    return Tuple {\n      codes: { E.ombCategory } union E.detailed,\n      display: E.text\n    }"},{"url":"displaySequence","valueInteger":23}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"SDE Ethnicity"},{"url":"statement","valueString":"define \"SDE Ethnicity\":\n  SDE.\"SDE Ethnicity\""},{"url":"displaySequence","valueInteger":24}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"Hospice"},{"url":"name","valueString":"Has Hospice Services"},{"url":"statement","valueString":"define \"Has Hospice Services\":\n  exists ((([Encounter: \"Encounter Inpatient\"]).isEncounterPerformed()) InpatientEncounter\n      where (InpatientEncounter.hospitalization.dischargeDisposition ~ \"Discharge to home for hospice care (procedure)\"\n          or InpatientEncounter.hospitalization.dischargeDisposition ~ \"Discharge to healthcare facility for hospice care (procedure)\"\n      )\n        and InpatientEncounter.period.toInterval() ends during day of \"Measurement Period\"\n  )\n    or exists ((([Encounter: \"Hospice Encounter\"]).isEncounterPerformed()) HospiceEncounter\n        where HospiceEncounter.period.toInterval() overlaps day of \"Measurement Period\"\n    )\n    or exists ((([Observation: \"Hospice care [Minimum Data Set]\"]).isAssessmentPerformed()) HospiceAssessment\n        where HospiceAssessment.value ~ \"Yes (qualifier value)\"\n          and HospiceAssessment.effective.toInterval() overlaps day of \"Measurement Period\"\n    )\n    or exists ((([ServiceRequest: \"Hospice Care Ambulatory\"]).isInterventionOrder()) HospiceOrder\n        where HospiceOrder.authoredOn.toInterval() during day of \"Measurement Period\"\n    )\n    or exists ((([Procedure: \"Hospice Care Ambulatory\"]).isInterventionPerformed()) HospicePerformed\n        where HospicePerformed.performed.toInterval() overlaps day of \"Measurement Period\"\n    )\n    or exists (([Condition: \"Hospice Diagnosis\"]) HospiceCareDiagnosis\n        where HospiceCareDiagnosis.prevalenceInterval() overlaps day of \"Measurement Period\"\n    )"},{"url":"displaySequence","valueInteger":25}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PalliativeCare"},{"url":"name","valueString":"Has Palliative Care in the Measurement Period"},{"url":"statement","valueString":"define \"Has Palliative Care in the Measurement Period\":\n  exists ((([Observation: \"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)\"]).isAssessmentPerformed()) PalliativeAssessment\n      where PalliativeAssessment.effective.toInterval() overlaps day of \"Measurement Period\"\n  )\n    or exists ([Condition: \"Palliative Care Diagnosis\"] PalliativeDiagnosis\n        where PalliativeDiagnosis.prevalenceInterval() overlaps day of \"Measurement Period\"\n    )\n    or exists ((([Encounter: \"Palliative Care Encounter\"]).isEncounterPerformed()) PalliativeEncounter\n        where PalliativeEncounter.period.toInterval() overlaps day of \"Measurement Period\"\n    )\n    or exists ((([Procedure: \"Palliative Care Intervention\"]).isInterventionPerformed()) PalliativeIntervention\n        where PalliativeIntervention.performed.toInterval() overlaps day of \"Measurement Period\"\n    )"},{"url":"displaySequence","valueInteger":26}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Denominator Exclusions"},{"url":"statement","valueString":"define \"Denominator Exclusions\":\n  Hospice.\"Has Hospice Services\"\n    or PalliativeCare.\"Has Palliative Care in the Measurement Period\"\n    or exists \"Pregnancy\""},{"url":"displaySequence","valueInteger":27}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"Denominator Exceptions"},{"url":"statement","valueString":"define \"Denominator Exceptions\":\n  exists \"Medical Reason for Not Documenting a Follow up Plan for Low or High BMI\"\n    or exists \"Medical Reason or Patient Reason for Not Performing BMI Exam\""},{"url":"displaySequence","valueInteger":28}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToConcept"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.\n*/\ndefine function ToConcept(concept FHIR.CodeableConcept):\n    if concept is null then\n        null\n    else\n        System.Concept {\n            codes: concept.coding C return ToCode(C),\n            display: concept.text.value\n        }"},{"url":"displaySequence","valueInteger":29}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToCode"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.\n*/\ndefine function ToCode(coding FHIR.Coding):\n    if coding is null then\n        null\n    else\n        System.Code {\n          code: coding.code.value,\n          system: coding.system.value,\n          version: coding.version.value,\n          display: coding.display.value\n        }"},{"url":"displaySequence","valueInteger":30}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"isHealthConcern"},{"url":"statement","valueString":"/*\n@description: Returns true if the given condition is a health concern\n*/\ndefine fluent function isHealthConcern(condition Condition):\n  exists (condition.category C\n    where C ~ \"health-concern\"\n  )"},{"url":"displaySequence","valueInteger":31}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"isActive"},{"url":"statement","valueString":"/* Candidates for FHIRCommon */\n\n/*\n@description: Returns true if the given condition has a clinical status of active, recurrence, or relapse\n*/\ndefine fluent function isActive(condition Condition):\n  condition.clinicalStatus ~ \"active\"\n    or condition.clinicalStatus ~ \"recurrence\"\n    or condition.clinicalStatus ~ \"relapse\""},{"url":"displaySequence","valueInteger":32}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"prevalenceInterval"},{"url":"statement","valueString":"/*\n@description: Returns an interval representing the normalized prevalence period of a given Condition.\n@comment: Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from\nonset to abatement as specified in the given Condition. If the condition is active, or has an abatement date the resulting \ninterval will have a closed ending boundary. Otherwise, the resulting interval will have an open ending boundary.\n*/\ndefine fluent function prevalenceInterval(condition Condition):\nif condition.clinicalStatus ~ \"active\"\n  or condition.clinicalStatus ~ \"recurrence\"\n  or condition.clinicalStatus ~ \"relapse\" then\n  Interval[start of condition.onset.toInterval(), end of condition.abatementInterval()]\nelse\n    (end of ToAbatementInterval(condition)) abatementDate\n    return if abatementDate is null then\n      Interval[start of ToInterval(condition.onset), abatementDate)\n    else\n      Interval[start of ToInterval(condition.onset), abatementDate]"},{"url":"displaySequence","valueInteger":33}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"abatementInterval"},{"url":"statement","valueString":"/*\n@description: Returns an interval representing the normalized abatement of a given Condition.\n@comment: If the abatement element of the Condition is represented as a DateTime, the result\nis an interval beginning and ending on that DateTime.\nIf the abatement is represented as a Quantity, the quantity is expected to be a calendar-duration and is interpreted as the age of the patient. The\nresult is an interval from the date the patient turned that age to immediately before one year later.\nIf the abatement is represented as a Quantity Interval, the quantities are expected to be calendar-durations and are interpreted as an age range during\nwhich the abatement occurred. The result is an interval from the date the patient turned the starting age of the quantity interval, and ending immediately\nbefore one year later than the date the patient turned the ending age of the quantity interval.\n*/\ndefine fluent function abatementInterval(condition Condition):\n\tif condition.abatement is DateTime then\n\t  Interval[condition.abatement as DateTime, condition.abatement as DateTime]\n\telse if condition.abatement is Quantity then\n\t\tInterval[Patient.birthDate + (condition.abatement as Quantity),\n\t\t\tPatient.birthDate + (condition.abatement as Quantity) + 1 year)\n\telse if condition.abatement is Interval<Quantity> then\n\t  Interval[Patient.birthDate + (condition.abatement.low as Quantity),\n\t\t  Patient.birthDate + (condition.abatement.high as Quantity) + 1 year)\n\telse if condition.abatement is Interval<DateTime> then\n\t  Interval[condition.abatement.low, condition.abatement.high)\n\telse null as Interval<DateTime>"},{"url":"displaySequence","valueInteger":34}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"ToAbatementInterval"},{"url":"statement","valueString":"/*\n@description: Returns an interval representing the normalized abatement of a given Condition.\n@comment: If the abatement element of the Condition is represented as a DateTime, the result\nis an interval beginning and ending on that DateTime.\nIf the abatement is represented as a Quantity, the quantity is expected to be a calendar-duration and is interpreted as the age of the patient. The\nresult is an interval from the date the patient turned that age to immediately before one year later.\nIf the abatement is represented as a Quantity Interval, the quantities are expected to be calendar-durations and are interpreted as an age range during\nwhich the abatement occurred. The result is an interval from the date the patient turned the starting age of the quantity interval, and ending immediately\nbefore one year later than the date the patient turned the ending age of the quantity interval.\n@deprecated: This function is deprecated. Use the fluent function `abatementInterval()` instead.\n*/\ndefine function ToAbatementInterval(condition Condition):\n\tif condition.abatement is DateTime then\n\t  Interval[condition.abatement as DateTime, condition.abatement as DateTime]\n\telse if condition.abatement is Quantity then\n\t\tInterval[Patient.birthDate + (condition.abatement as Quantity),\n\t\t\tPatient.birthDate + (condition.abatement as Quantity) + 1 year)\n\telse if condition.abatement is Interval<Quantity> then\n\t  Interval[Patient.birthDate + (condition.abatement.low as Quantity),\n\t\t  Patient.birthDate + (condition.abatement.high as Quantity) + 1 year)\n\telse if condition.abatement is Interval<DateTime> then\n\t  Interval[condition.abatement.low, condition.abatement.high)\n\telse null as Interval<DateTime>"},{"url":"displaySequence","valueInteger":35}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"toInterval"},{"url":"statement","valueString":"/*\n@description: Normalizes a value that is a choice of timing-valued types to an equivalent interval\n@comment: Normalizes a choice type of DateTime, Quanitty, Interval<DateTime>, or Interval<Quantity> types\nto an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible\nrepresentations for timing-valued elements in QICore, allowing this function to be used across any resource.\nThe input can be provided as a DateTime, Quantity, Interval<DateTime> or Interval<Quantity>.\nThe intent of this function is to provide a clear and concise mechanism to treat single\nelements that have multiple possible representations as intervals so that logic doesn't have to account\nfor the variability. More complex calculations (such as medication request period or dispense period\ncalculation) need specific guidance and consideration. That guidance may make use of this function, but\nthe focus of this function is on single element calculations where the semantics are unambiguous.\nIf the input is a DateTime, the result a DateTime Interval beginning and ending on that DateTime.\nIf the input is a Quantity, the quantity is expected to be a calendar-duration interpreted as an Age,\nand the result is a DateTime Interval beginning on the Date the patient turned that age and ending immediately before one year later.\nIf the input is a DateTime Interval, the result is the input.\nIf the input is a Quantity Interval, the quantities are expected to be calendar-durations interpreted as an Age, and the result\nis a DateTime Interval beginning on the date the patient turned the age given as the start of the quantity interval, and ending\nimmediately before one year later than the date the patient turned the age given as the end of the quantity interval.\nIf the input is a Timing, an error will be thrown indicating that Timing calculations are not implemented. Any other input will reslt in a null DateTime Interval\n*/\ndefine fluent function toInterval(choice Choice<DateTime, Quantity, Interval<DateTime>, Interval<Quantity>, Timing>):\n  case\n\t  when choice is DateTime then\n    \tInterval[choice as DateTime, choice as DateTime]\n\t\twhen choice is Interval<DateTime> then\n  \t\tchoice as Interval<DateTime>\n\t\twhen choice is Quantity then\n\t\t  Interval[Patient.birthDate + (choice as Quantity),\n\t\t\t  Patient.birthDate + (choice as Quantity) + 1 year)\n\t\twhen choice is Interval<Quantity> then\n\t\t  Interval[Patient.birthDate + (choice.low as Quantity),\n\t\t\t  Patient.birthDate + (choice.high as Quantity) + 1 year)\n\t\twhen choice is Timing then\n      Message(null, true, 'NOT_IMPLEMENTED', 'Error', 'Calculation of an interval from a Timing value is not supported') as Interval<DateTime>\n\t\telse\n\t\t\tnull as Interval<DateTime>\n\tend"},{"url":"displaySequence","valueInteger":36}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"FHIRHelpers"},{"url":"name","valueString":"ToString"},{"url":"statement","valueString":"define function ToString(value uri): value.value"},{"url":"displaySequence","valueInteger":37}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"QICoreCommon"},{"url":"name","valueString":"isProblemListItem"},{"url":"statement","valueString":"/*\n@description: Returns true if the given condition is a problem list item.\n*/\ndefine fluent function isProblemListItem(condition Condition):\n  exists (condition.category C\n    where C ~ \"problem-list-item\"\n  )"},{"url":"displaySequence","valueInteger":38}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"Status"},{"url":"name","valueString":"isEncounterPerformed"},{"url":"statement","valueString":"define fluent function isEncounterPerformed(Enc List<Encounter>):\n  Enc E\n    where E.status in {'finished', 'arrived', 'triaged', 'in-progress', 'onleave'}"},{"url":"displaySequence","valueInteger":39}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"Status"},{"url":"name","valueString":"isAssessmentPerformed"},{"url":"statement","valueString":"//Similar but different from QICoreCommon.isSurvey, which does not have status constraints\ndefine fluent function isAssessmentPerformed(Obs List<Observation>):\n  Obs O\n    where O.status in { 'final', 'amended', 'corrected' }\n          and exists ( O.category ObservationCategory\n          where ( ObservationCategory ) ~ \"survey\"\n      )"},{"url":"displaySequence","valueInteger":40}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"Status"},{"url":"name","valueString":"isInterventionOrder"},{"url":"statement","valueString":"define fluent function isInterventionOrder(ServiceRequest List<ServiceRequest>):\n  ServiceRequest S\n    where S.status in { 'active', 'completed' }\n      and S.intent = 'order'"},{"url":"displaySequence","valueInteger":41}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"Status"},{"url":"name","valueString":"isInterventionPerformed"},{"url":"statement","valueString":"define fluent function isInterventionPerformed(Proc List<Procedure>):\n  Proc P\n    where P.status ~ 'completed'"},{"url":"displaySequence","valueInteger":42}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"ToConcept"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [CodeableConcept](https://hl7.org/fhir/datatypes.html#CodeableConcept) value to a CQL Concept.\n*/\ndefine function ToConcept(concept FHIR.CodeableConcept):\n    if concept is null then\n        null\n    else\n        System.Concept {\n            codes: concept.coding C return ToCode(C),\n            display: concept.text.value\n        }"},{"url":"displaySequence","valueInteger":43}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"ToCode"},{"url":"statement","valueString":"/*\n@description: Converts the given FHIR [Coding](https://hl7.org/fhir/datatypes.html#Coding) value to a CQL Code.\n*/\ndefine function ToCode(coding FHIR.Coding):\n    if coding is null then\n        null\n    else\n        System.Code {\n          code: coding.code.value,\n          system: coding.system.value,\n          version: coding.version.value,\n          display: coding.display.value\n        }"},{"url":"displaySequence","valueInteger":44}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"isHealthConcern"},{"url":"statement","valueString":"/*\n@description: Returns true if the given condition is a health concern\n*/\ndefine fluent function isHealthConcern(condition Condition):\n  exists (condition.category C\n    where C ~ \"health-concern\"\n  )"},{"url":"displaySequence","valueInteger":45}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"isActive"},{"url":"statement","valueString":"/* Candidates for FHIRCommon */\n\n/*\n@description: Returns true if the given condition has a clinical status of active, recurrence, or relapse\n*/\ndefine fluent function isActive(condition Condition):\n  condition.clinicalStatus ~ \"active\"\n    or condition.clinicalStatus ~ \"recurrence\"\n    or condition.clinicalStatus ~ \"relapse\""},{"url":"displaySequence","valueInteger":46}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"prevalenceInterval"},{"url":"statement","valueString":"/*\n@description: Returns an interval representing the normalized prevalence period of a given Condition.\n@comment: Uses the ToInterval and ToAbatementInterval functions to determine the widest potential interval from\nonset to abatement as specified in the given Condition. If the condition is active, or has an abatement date the resulting \ninterval will have a closed ending boundary. Otherwise, the resulting interval will have an open ending boundary.\n*/\ndefine fluent function prevalenceInterval(condition Condition):\nif condition.clinicalStatus ~ \"active\"\n  or condition.clinicalStatus ~ \"recurrence\"\n  or condition.clinicalStatus ~ \"relapse\" then\n  Interval[start of condition.onset.toInterval(), end of condition.abatementInterval()]\nelse\n    (end of ToAbatementInterval(condition)) abatementDate\n    return if abatementDate is null then\n      Interval[start of ToInterval(condition.onset), abatementDate)\n    else\n      Interval[start of ToInterval(condition.onset), abatementDate]"},{"url":"displaySequence","valueInteger":47}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"abatementInterval"},{"url":"statement","valueString":"/*\n@description: Returns an interval representing the normalized abatement of a given Condition.\n@comment: If the abatement element of the Condition is represented as a DateTime, the result\nis an interval beginning and ending on that DateTime.\nIf the abatement is represented as a Quantity, the quantity is expected to be a calendar-duration and is interpreted as the age of the patient. The\nresult is an interval from the date the patient turned that age to immediately before one year later.\nIf the abatement is represented as a Quantity Interval, the quantities are expected to be calendar-durations and are interpreted as an age range during\nwhich the abatement occurred. The result is an interval from the date the patient turned the starting age of the quantity interval, and ending immediately\nbefore one year later than the date the patient turned the ending age of the quantity interval.\n*/\ndefine fluent function abatementInterval(condition Condition):\n\tif condition.abatement is DateTime then\n\t  Interval[condition.abatement as DateTime, condition.abatement as DateTime]\n\telse if condition.abatement is Quantity then\n\t\tInterval[Patient.birthDate + (condition.abatement as Quantity),\n\t\t\tPatient.birthDate + (condition.abatement as Quantity) + 1 year)\n\telse if condition.abatement is Interval<Quantity> then\n\t  Interval[Patient.birthDate + (condition.abatement.low as Quantity),\n\t\t  Patient.birthDate + (condition.abatement.high as Quantity) + 1 year)\n\telse if condition.abatement is Interval<DateTime> then\n\t  Interval[condition.abatement.low, condition.abatement.high)\n\telse null as Interval<DateTime>"},{"url":"displaySequence","valueInteger":48}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"ToAbatementInterval"},{"url":"statement","valueString":"/*\n@description: Returns an interval representing the normalized abatement of a given Condition.\n@comment: If the abatement element of the Condition is represented as a DateTime, the result\nis an interval beginning and ending on that DateTime.\nIf the abatement is represented as a Quantity, the quantity is expected to be a calendar-duration and is interpreted as the age of the patient. The\nresult is an interval from the date the patient turned that age to immediately before one year later.\nIf the abatement is represented as a Quantity Interval, the quantities are expected to be calendar-durations and are interpreted as an age range during\nwhich the abatement occurred. The result is an interval from the date the patient turned the starting age of the quantity interval, and ending immediately\nbefore one year later than the date the patient turned the ending age of the quantity interval.\n@deprecated: This function is deprecated. Use the fluent function `abatementInterval()` instead.\n*/\ndefine function ToAbatementInterval(condition Condition):\n\tif condition.abatement is DateTime then\n\t  Interval[condition.abatement as DateTime, condition.abatement as DateTime]\n\telse if condition.abatement is Quantity then\n\t\tInterval[Patient.birthDate + (condition.abatement as Quantity),\n\t\t\tPatient.birthDate + (condition.abatement as Quantity) + 1 year)\n\telse if condition.abatement is Interval<Quantity> then\n\t  Interval[Patient.birthDate + (condition.abatement.low as Quantity),\n\t\t  Patient.birthDate + (condition.abatement.high as Quantity) + 1 year)\n\telse if condition.abatement is Interval<DateTime> then\n\t  Interval[condition.abatement.low, condition.abatement.high)\n\telse null as Interval<DateTime>"},{"url":"displaySequence","valueInteger":49}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"toInterval"},{"url":"statement","valueString":"/*\n@description: Normalizes a value that is a choice of timing-valued types to an equivalent interval\n@comment: Normalizes a choice type of DateTime, Quanitty, Interval<DateTime>, or Interval<Quantity> types\nto an equivalent interval. This selection of choice types is a superset of the majority of choice types that are used as possible\nrepresentations for timing-valued elements in QICore, allowing this function to be used across any resource.\nThe input can be provided as a DateTime, Quantity, Interval<DateTime> or Interval<Quantity>.\nThe intent of this function is to provide a clear and concise mechanism to treat single\nelements that have multiple possible representations as intervals so that logic doesn't have to account\nfor the variability. More complex calculations (such as medication request period or dispense period\ncalculation) need specific guidance and consideration. That guidance may make use of this function, but\nthe focus of this function is on single element calculations where the semantics are unambiguous.\nIf the input is a DateTime, the result a DateTime Interval beginning and ending on that DateTime.\nIf the input is a Quantity, the quantity is expected to be a calendar-duration interpreted as an Age,\nand the result is a DateTime Interval beginning on the Date the patient turned that age and ending immediately before one year later.\nIf the input is a DateTime Interval, the result is the input.\nIf the input is a Quantity Interval, the quantities are expected to be calendar-durations interpreted as an Age, and the result\nis a DateTime Interval beginning on the date the patient turned the age given as the start of the quantity interval, and ending\nimmediately before one year later than the date the patient turned the age given as the end of the quantity interval.\nIf the input is a Timing, an error will be thrown indicating that Timing calculations are not implemented. Any other input will reslt in a null DateTime Interval\n*/\ndefine fluent function toInterval(choice Choice<DateTime, Quantity, Interval<DateTime>, Interval<Quantity>, Timing>):\n  case\n\t  when choice is DateTime then\n    \tInterval[choice as DateTime, choice as DateTime]\n\t\twhen choice is Interval<DateTime> then\n  \t\tchoice as Interval<DateTime>\n\t\twhen choice is Quantity then\n\t\t  Interval[Patient.birthDate + (choice as Quantity),\n\t\t\t  Patient.birthDate + (choice as Quantity) + 1 year)\n\t\twhen choice is Interval<Quantity> then\n\t\t  Interval[Patient.birthDate + (choice.low as Quantity),\n\t\t\t  Patient.birthDate + (choice.high as Quantity) + 1 year)\n\t\twhen choice is Timing then\n      Message(null, true, 'NOT_IMPLEMENTED', 'Error', 'Calculation of an interval from a Timing value is not supported') as Interval<DateTime>\n\t\telse\n\t\t\tnull as Interval<DateTime>\n\tend"},{"url":"displaySequence","valueInteger":50}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"ToString"},{"url":"statement","valueString":"define function ToString(value uri): value.value"},{"url":"displaySequence","valueInteger":51}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"isProblemListItem"},{"url":"statement","valueString":"/*\n@description: Returns true if the given condition is a problem list item.\n*/\ndefine fluent function isProblemListItem(condition Condition):\n  exists (condition.category C\n    where C ~ \"problem-list-item\"\n  )"},{"url":"displaySequence","valueInteger":52}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"isEncounterPerformed"},{"url":"statement","valueString":"define fluent function isEncounterPerformed(Enc List<Encounter>):\n  Enc E\n    where E.status in {'finished', 'arrived', 'triaged', 'in-progress', 'onleave'}"},{"url":"displaySequence","valueInteger":53}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"isAssessmentPerformed"},{"url":"statement","valueString":"//Similar but different from QICoreCommon.isSurvey, which does not have status constraints\ndefine fluent function isAssessmentPerformed(Obs List<Observation>):\n  Obs O\n    where O.status in { 'final', 'amended', 'corrected' }\n          and exists ( O.category ObservationCategory\n          where ( ObservationCategory ) ~ \"survey\"\n      )"},{"url":"displaySequence","valueInteger":54}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"isInterventionOrder"},{"url":"statement","valueString":"define fluent function isInterventionOrder(ServiceRequest List<ServiceRequest>):\n  ServiceRequest S\n    where S.status in { 'active', 'completed' }\n      and S.intent = 'order'"},{"url":"displaySequence","valueInteger":55}]},{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"PCSBMIScreenAndFollowUpFHIR"},{"url":"name","valueString":"isInterventionPerformed"},{"url":"statement","valueString":"define fluent function isInterventionPerformed(Proc List<Procedure>):\n  Proc P\n    where P.status ~ 'completed'"},{"url":"displaySequence","valueInteger":56}]}],"name":"EffectiveDataRequirements","status":"active","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"module-definition"}]},"relatedArtifact":[{"type":"depends-on","display":"Library FHIRHelpers","resource":"http://fhir.org/guides/cdc/opioid-cds/Library/FHIRHelpers|4.3.000"},{"type":"depends-on","display":"Library QICoreCommon","resource":"http://fhir.org/guides/cdc/opioid-cds/Library/QICoreCommon|2.0.000"},{"type":"depends-on","display":"Library SDE","resource":"http://fhir.org/guides/cdc/opioid-cds/Library/SupplementalDataElements|3.4.000"},{"type":"depends-on","display":"Library Hospice","resource":"http://fhir.org/guides/cdc/opioid-cds/Library/Hospice|6.9.000"},{"type":"depends-on","display":"Library Status","resource":"http://fhir.org/guides/cdc/opioid-cds/Library/Status|1.6.000"},{"type":"depends-on","display":"Library PalliativeCare","resource":"http://fhir.org/guides/cdc/opioid-cds/Library/PalliativeCare|1.9.000"},{"type":"depends-on","display":"Code system USCoreConditionCategoryExtensionCodes","resource":"http://hl7.org/fhir/us/core/CodeSystem/condition-category"},{"type":"depends-on","display":"Code system ConditionClinicalStatusCodes","resource":"http://terminology.hl7.org/CodeSystem/condition-clinical"},{"type":"depends-on","display":"Code system ActCode","resource":"http://terminology.hl7.org/CodeSystem/v3-ActCode"},{"type":"depends-on","display":"Code system ConditionCategory","resource":"http://terminology.hl7.org/CodeSystem/condition-category"},{"type":"depends-on","display":"Code system LOINC","resource":"http://loinc.org"},{"type":"depends-on","display":"Code system SNOMEDCT","resource":"http://snomed.info/sct"},{"type":"depends-on","display":"Code system ObservationCategoryCodes","resource":"http://terminology.hl7.org/CodeSystem/observation-category"},{"type":"depends-on","display":"Value set Follow Up for Below Normal BMI","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1528"},{"type":"depends-on","display":"Value set Referrals Where Weight Assessment May Occur","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1527"},{"type":"depends-on","display":"Value set Medications for Below Normal BMI","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1562"},{"type":"depends-on","display":"Value set Underweight","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1563"},{"type":"depends-on","display":"Value set Follow Up for Above Normal BMI","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1525"},{"type":"depends-on","display":"Value set Overweight or Obese","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1047.502"},{"type":"depends-on","display":"Value set Encounter to Evaluate BMI","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1751"},{"type":"depends-on","display":"Value set Medical Reason","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1007"},{"type":"depends-on","display":"Value set Medications for Above Normal BMI","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1561"},{"type":"depends-on","display":"Value set Pregnancy or Other Related Diagnoses","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1623"},{"type":"depends-on","display":"Value set Patient Declined","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1582"},{"type":"depends-on","display":"Value set Payer Type","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"},{"type":"depends-on","display":"Value set Encounter Inpatient","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"},{"type":"depends-on","display":"Value set Hospice Encounter","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1003"},{"type":"depends-on","display":"Value set Hospice Care Ambulatory","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584"},{"type":"depends-on","display":"Value set Hospice Diagnosis","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1165"},{"type":"depends-on","display":"Value set Palliative Care Diagnosis","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1167"},{"type":"depends-on","display":"Value set Palliative Care Encounter","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1090"},{"type":"depends-on","display":"Value set Palliative Care Intervention","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1135"}],"parameter":[{"name":"Measurement Period","use":"in","min":0,"max":"1","type":"Period"},{"name":"Low BMI and Follow up Provided","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Has Normal BMI","use":"out","min":0,"max":"1","type":"boolean"},{"name":"High BMI Interventions Performed","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Patient","use":"out","min":0,"max":"1","type":"Resource"},{"name":"Medical Reason for Not Documenting a Follow up Plan for Low or High BMI","use":"out","min":0,"max":"*","type":"Resource"},{"name":"BMI during Measurement Period","use":"out","min":0,"max":"*","type":"Resource"},{"name":"SDE Race","use":"out","min":0,"max":"1","type":"Resource"},{"name":"Documented High BMI during Measurement Period","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Low BMI Interventions Performed","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Pregnancy","use":"out","min":0,"max":"*","type":"Resource"},{"name":"SDE Sex","use":"out","min":0,"max":"1","type":"Coding"},{"name":"Numerator","use":"out","min":0,"max":"1","type":"boolean"},{"name":"Medical Reason or Patient Reason for Not Performing BMI Exam","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Qualifying Encounter during Day of Measurement Period","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Denominator","use":"out","min":0,"max":"1","type":"boolean"},{"name":"SDE Payer","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Initial Population","use":"out","min":0,"max":"1","type":"boolean"},{"name":"SDE Ethnicity","use":"out","min":0,"max":"1","type":"Resource"},{"name":"Denominator Exclusions","use":"out","min":0,"max":"1","type":"boolean"},{"name":"Low BMI Interventions Ordered","use":"out","min":0,"max":"*","type":"Resource"},{"name":"High BMI and Follow up Provided","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Documented Low BMI during Measurement Period","use":"out","min":0,"max":"*","type":"Resource"},{"name":"Denominator Exceptions","use":"out","min":0,"max":"1","type":"boolean"},{"name":"High BMI Interventions Ordered","use":"out","min":0,"max":"*","type":"Resource"}],"dataRequirement":[{"type":"Observation","profile":["http://hl7.org/fhir/StructureDefinition/bmi"],"mustSupport":["value","status","effective"]},{"type":"Patient","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient"],"mustSupport":["extension('http://hl7.org/fhir/us/core/StructureDefinition/us-core-race')"]},{"type":"Patient","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient"],"mustSupport":["extension('http://hl7.org/fhir/us/core/StructureDefinition/us-core-race')","extension('http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity')"]},{"type":"Patient","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient"],"mustSupport":["extension('http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity')"]},{"type":"Medication","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication"]},{"type":"Medication","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication"]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1562"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationrequest"],"mustSupport":["medication"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1561"}]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest"],"mustSupport":["code","status","intent"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1528"}]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest"],"mustSupport":["code","status","intent"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1525"}]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest"],"mustSupport":["code","status","intent"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1527"}]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicerequest"],"mustSupport":["code","authoredOn","status","intent"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584"}]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"],"mustSupport":["code","category","clinicalStatus","onset"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1563"}]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"],"mustSupport":["code","clinicalStatus","onset","abatement"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1623"},{"path":"clinicalStatus"}]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"],"mustSupport":["code","category","clinicalStatus","onset"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1047.502"}]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"],"mustSupport":["code","abatement"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1165"}]},{"type":"Condition","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition"],"mustSupport":["code","abatement","abatement.low","abatement.high"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1167"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","reasonCode","status","performed"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1528"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","reasonCode","status","performed"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1525"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","performed","status"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1584"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","performed","status"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.198.12.1135"}]},{"extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-relatedRequirement","extension":[{"url":"targetId","valueString":"386"},{"url":"targetProperty","valueString":"effective"}]}],"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","period","status"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1751"},{"path":"class"},{"path":"status","code":[{"code":"finished"}]}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","hospitalization","hospitalization.dischargeDisposition","period","status"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","period","status"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.1003"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","period","status"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1090"}]},{"type":"Encounter","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"],"mustSupport":["type","period","status"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1751"},{"path":"class"},{"path":"status","code":[{"code":"finished"}]}]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicenotrequested"],"mustSupport":["code","authoredOn","status"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1527"}]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicenotrequested"],"mustSupport":["code","authoredOn","status"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1525"}]},{"type":"ServiceRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-servicenotrequested"],"mustSupport":["code","authoredOn","status"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1528"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-mednotrequested"],"mustSupport":["medication","authoredOn","status","reasonCode"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1561"}]},{"type":"MedicationRequest","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-mednotrequested"],"mustSupport":["medication","authoredOn","status","reasonCode"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.1562"}]},{"id":"386","type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observationnotdone"],"mustSupport":["code","effective","status","extension('http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-notDoneReason')"],"codeFilter":[{"path":"code","code":[{"system":"http://loinc.org","code":"39156-5","display":"Body mass index (BMI) [Ratio]"}]}]},{"type":"Coverage","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-coverage"],"mustSupport":["type","period"],"codeFilter":[{"path":"type","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.114222.4.11.3591"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation"],"mustSupport":["code","value","effective","status","category"],"codeFilter":[{"path":"code","code":[{"system":"http://loinc.org","code":"45755-6","display":"Hospice care [Minimum Data Set]"}]},{"path":"value"}]},{"type":"Observation","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-observation"],"mustSupport":["code","effective","status","category"],"codeFilter":[{"path":"code","code":[{"system":"http://loinc.org","code":"71007-9","display":"Functional Assessment of Chronic Illness Therapy - Palliative Care Questionnaire (FACIT-Pal)"}]}]}]}
