{"resourceType":"Library","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-logicDefinition","extension":[{"url":"libraryName","valueString":"DataRequirementHelper"},{"url":"name","valueString":"Retrieve Def"},{"url":"statement","valueString":"// why status.value\n\n// http://hl7.org/fhir/StructureDefinition/bmi\n//  Valueset - 2.16.840.1.113883.3.600.1.1623\n//  Must Support - value, status \n\ndefine \"Retrieve Def\":\n  ( [\"MedicationAdministration\": \"Retrieve VS\"] Retrieve1\n      where Retrieve1.status in { 'in-progress', 'completed' }\n      return {\n        id: Retrieve1.id,\n        effective: Retrieve1.effective\n      }\n  )\n    union ( [\"Procedure\": \"Retrieve VS2\"] Retrieve2\n        where Retrieve2.status = 'completed'\n        return {\n          id: Retrieve2.id,\n          effective: Retrieve2.performed\n        }\n    )"},{"url":"displaySequence","valueInteger":0}]}],"status":"active","type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"module-definition"}]},"relatedArtifact":[{"type":"depends-on","display":"Library FHIRHelpers","resource":"http://fhir.org/guides/cdc/opioid-cds/Library/FHIRHelpers|4.3.000"},{"type":"depends-on","display":"Value set Retrieve VS","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1623"},{"type":"depends-on","display":"Value set Retrieve VS2","resource":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1624"}],"parameter":[{"name":"Patient","use":"out","min":0,"max":"1","type":"Resource"},{"name":"Retrieve Def","use":"out","min":0,"max":"*","type":"Resource"}],"dataRequirement":[{"type":"Patient","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient"]},{"type":"MedicationAdministration","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medicationadministration"],"mustSupport":["medication","status","status.value","id","id.value","effective"],"codeFilter":[{"path":"medication","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1623"}]},{"type":"Procedure","profile":["http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-procedure"],"mustSupport":["code","status","status.value","id","id.value","performed"],"codeFilter":[{"path":"code","valueSet":"http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1624"},{"path":"status.value","code":[{"code":"completed"}]}]}]}
